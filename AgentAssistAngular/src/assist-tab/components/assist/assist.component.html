<div class="dynamic-block-content">
    <!-- <div class="sentiment-analysis">
        <div echarts [options]="chartOption" class="chart-container"></div>
    </div> -->
  <div class = "welcome-msg collapse-acc-data before-none" id='smallTalk-{{uuids}}' *ngIf="(welcomeMsgResponse | json) != '{}'">
        <div class="steps-run-data">
            <div class="icon_block">
                <i class="ast-agent"></i>
            </div>
            <div class="run-info-content" *ngFor="let ele of welcomeMsgResponse?.buttons; let i=index">
              <div class="title" *ngIf="(i === 0 && interactiveLangaugeDetails === 'es') else enRef">El cliente ha esperado a un agente durante unos segundos.<br/>Aquí hay algunas líneas de apertura apropiadas.</div>
              <ng-template #enRef>
                <div class="title" *ngIf="i === 0">Customer has waited for an agent for few seconds.<br/>Here are some appropriate opening lines.</div>
              </ng-template>
                <div class="agent-utt">
                    <div class="title-data" id="displayData-{{uuids}}">{{ele.value}}</div>
                    <div class="action-links" *ngIf="!commonService.isCallConversation">
                        <button class="send-run-btn" id="sendMsgWelcome"
                            (click)="commonService.preparePostMessageForSendAndCopy($event, ele.value, idReferenceConst.SENDMSG, connectionDetails)">Send</button>
                        <div class="copy-btn welcome-msg-copy"
                            (click)="commonService.preparePostMessageForSendAndCopy($event, ele.value, idReferenceConst.COPYMSG, connectionDetails)">
                            <i class="ast-copy welcome-msg-copy"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="dynamicBlock">
        <ng-container *ngFor="let res of assistResponseArray; let i = index">
            <div class="unread-msg last-msg-white-bg" *ngIf="unreadUUID && unreadUUID == res.uuid && !commonService.isAutomationOnGoing">
                <div class="text-dialog-task-end">Unread Messages</div>
            </div>
            <ng-container *ngIf="res.type == renderResponseType.SUGGESTIONS">
                <div class="agent-utt-info" attr.id="agentUttInfo-{{res.uuid}}">
                    <div class="user-img">
                        <img src="assets/images/userIcon.svg">
                    </div>
                    <div class="text-user">{{res.data.userInput}}</div>
                </div>
                <app-suggestions [suggestionResponse]="res" [agentassistArrayIndex]="i"
                    [agentassistResponseArrayLength]="assistResponseArray.length"
                    (updateFaqAmbiguity)="updateFaqAmbiguity($event, i)"></app-suggestions>
            </ng-container>
            <ng-container *ngIf="res.type == renderResponseType.SMALLTALK">
                <app-smalltalk [smallTalkData]="res" [agentassistArrayIndex]="i"
                    [agentassistResponseArrayLength]="assistResponseArray.length"
                    [agentAssistResp]="agentAssistResponse"></app-smalltalk>
            </ng-container>
            <ng-container *ngIf="res.type == renderResponseType.AUTOMATION">
                <app-automation [automationData]="res" (scrollBottom)="scrollToBottom($event)"
                    (handlePopupEvent)="handleTerminatePopup(event)" [agentassistArrayIndex]="i"
                    [agentassistResponseArrayLength]="assistResponseArray.length"></app-automation>
            </ng-container>
            <ng-container *ngIf="res.type == renderResponseType.FEEDBACK">
                <app-feedback [feedbackData]="res" (updateFeedbackProperties)="updateFeedbackProperties($event,i)"
                    [agentassistArrayIndex]="i" [agentassistResponseArrayLength]="assistResponseArray.length">
                </app-feedback>
            </ng-container>
        </ng-container>
        <div id="userTab-custSentimentAnalysis" class="customer-feeling-text">
        </div>


        <div class="scroll-bottom-show-btn" *ngIf="!commonService.scrollContent[projConstants.ASSIST].scrollAtEnd">
            <button id="scrollButtonTranscript" class="scroll-bottom-btn"
                [ngClass]="{'new-messages' : commonService.scrollContent[projConstants.ASSIST].numberOfNewMessages}"
                (click)="scrollToBottom(true)">
                <i class="ast-carrotup"></i>
                <span *ngIf="!commonService.scrollContent[projConstants.ASSIST].numberOfNewMessages">Scroll to
                    bottom</span>
                <span
                    *ngIf="commonService.scrollContent[projConstants.ASSIST].numberOfNewMessages">{{commonService.scrollContent[projConstants.ASSIST].numberOfNewMessages}}
                    new</span>

            </button>
        </div>

        <div class="empty-data-no-agents" *ngIf="!welcomeMsgResponse">
            <div class="title">No Agent automations are in running state.</div>
            <div class="desc-text">Use "Run with Agent Inputs" to execute.</div>
        </div>
    </div>
</div>