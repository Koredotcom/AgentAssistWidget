<div class="slider-sec-data">
    <form>
        <div class="header-sec row m-0">
            <div class="lef-sec col-9 p-0">
                <!-- <img src="assets/icons/agent-assist/add-response-group.svg">             -->
                <div class="main-title text-truncate" title="{{inputData?.usecaseName || ('USECASES.NEW_UC' | translate)}}">{{inputData?.usecaseName || ('USECASES.NEW_UC' | translate)}}</div>
            </div>
            <label class="kr-sg-toggle" *ngIf="ucType === 'dialog'">
                <input type="checkbox" [(ngModel)]="conv.isEnabled" #confToggle name="confToggle">
                <div class="slider"><span class="enabled" *ngIf="conv.isEnabled !== false">{{ "USECASES.ENABLED" | translate}}</span><span *ngIf="conv.isEnabled === false" class="disabled">{{"USECASES.DISABLED" | translate}}</span></div>
            </label>
            <div class="close-link col-3 p-0"><img src="assets/images/close.svg" (click)="close()"></div>
        </div>
        <perfect-scrollbar class="scroll-content">
            <div class="add-new-agent-container">
                <ul class="nav nav-tabs" role="tablist">
                    <li>
                        <div class="tab-name active" data-toggle="tab" href="#config">
                            <!-- <img src="assets/icons/agent-usecase/configuration.svg" class="call-inactive"> -->
                            <!-- <img src="assets/icons/agent-usecase/configuration-active.svg" class="call-active"> -->
                            General Setup
                        </div>
                    </li>
                    <li *ngIf="!conv.isAgentAssistOnly">
                        <div class="tab-name" data-toggle="tab" href="#call">
                            <!-- <img src="assets/icons/call-inactive.svg" class="call-inactive">
                            <img src="assets/icons/call-active.svg" class="call-active"> -->
                            {{ "USECASES.CALL_EXPERIENCE" | translate }}
                        </div>
                    </li>
                    <li *ngIf="!conv.isAgentAssistOnly">
                        <div class="tab-name" data-toggle="tab" href="#chat">
                            <!-- <img src="assets/icons/comment-active.svg" class="chat-active">
                            <img src="assets/icons/comment-inactive.svg" class="chat-inactive"> -->
                            {{ "USECASES.CHAT_EXPERIENCE" | translate }}
                        </div>
                    </li>
                    <li *ngIf="ucType === 'dialog' && (conv.isAgentAssistOnly || conv.hasAgentAssistAccess)">
                        <div class="tab-name" data-toggle="tab" href="#triggersandpermissions">
                            <!-- <img src="assets/icons/agent-usecase/triggers.svg" class="call-inactive"> -->
                            <img src="assets/icons/agent-usecase/triggers-active.svg" class="call-active">{{"TRIGGER_PERMISSION" | translate}}
                        </div>
                    </li>
                </ul>
                <div class="tab-content">
                    <div id="config" class="tab-pane fade show active">
                        <div class="configuration-sec-tab">
                            <div class="col-12 row m-0 mb-4 p-0 align-items-center">
                                <div class="kr-sg-input-text col-4 pl-0">
                                    <div class="label-text">{{"USECASE_NAME" | translate}}</div>
                                    <input type="text" [placeholder]="'PLACEHOLDERS.ADD_UC_HERE' | translate" class="input-text" name="usecaseName" [(ngModel)]="conv.usecaseName" #ucName #usecaseNameModel="ngModel" required>
                                    <div class="error-message" *ngIf=" usecaseNameModel.invalid && usecaseNameModel.touched">
                                        {{"USECASES.PLS_VALID_NAME" | translate}}
                                    </div>
                                </div>
                                <div class="kr-sg-dropdowns col-4 pl-0">
                                    <div class="form-group-cat">
                                        <div class="label-text"> {{ "USECASES.CATEGORY" | translate }}</div>
                                        <div class="inp-block">
                                            <input type="text" id="category" name="v" (keydown.enter)="createCategory($event)" class="form-control" [placeholder]="'PLACEHOLDERS.TYPE_ENTER' | translate" maxlength="30" [matAutocomplete]="auto" #aComp #autoCompleteInput="matAutocompleteTrigger" #categoryEle="ngModel" [(ngModel)]="conv.category" required (input)="onCatInput($event.target.value)" (focus)="onCatInput()">
                                            <div class="inp-stamp" [ngStyle]="{'background-color': selectedPallete}"></div>
                                        </div>
                                        <mat-autocomplete #auto="matAutocomplete" (opened)="selectedPallete = '';" (optionSelected)="onCategory($event?.option.value)">
                                            <mat-option *ngFor="let category of filteredCategories" class="usecase-category-option" [value]="category.category">
                                                <div>{{category.category}}</div>
                                                <div class="stamp" [ngStyle]="{'background-color': category.colorCode}"></div>
                                            </mat-option>
                                        </mat-autocomplete>

                                        <div class="error-message" *ngIf="categoryEle.invalid && categoryEle.touched">
                                            {{ "USECASES.PLS_SELECT" | translate }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-4 pr-0" *ngIf="inputData">
                                    <div class="edit-bot-flat-form" (click)="launchPlatform()"><img src="assets/icons/survey/actionbot.svg">{{"USECASES.EDIT_IN_BOT_PLATFORM" | translate}}</div>
                                </div>
                            </div>
                            <!-- <div class="group-checkbox mb-4" *ngIf="ucType === 'dialog'">
                                <div class="heading-title">{{"USECASE_TYPE" | translate}}</div>
                                <!-- <div class="info-desc mb-2">{{"USECASE_TYPE_INFO" | translate}}</div>
                                <div class="kr-sg-checkbox d-block">
                                    <input id="checkbox_grpg" class="checkbox-custom" type="checkbox" name="isBotUsecase" [(ngModel)]="conv.isBotUsecase" #isBotUsecase (change)="onChangeUCType('bot', isBotUsecase.checked)">
                                    <label for="checkbox_grpg" class="checkbox-custom-label">
                                        <div class="actual-label">Customer Use Case</div>
                                        <div class="desc-text-label">Use case will be available for end customers </div>
                                    </label>
                                </div>
                                <div class="kr-sg-checkbox d-block">
                                    <input id="checkbox_grph" class="checkbox-custom" type="checkbox" name="isAgentUsecase" [(ngModel)]="conv.isAgentUsecase" #isAgentUsecase (change)="onChangeUCType('agent', isAgentUsecase.checked)">
                                    <label for="checkbox_grph" class="checkbox-custom-label">
                                        <div class="actual-label">Agent assistant Use case</div>
                                        <div class="desc-text-label">Use case will be available for agents in agent assist</div>
                                    </label>
                                </div>
                            </div>  -->
                            <div class="kr-sg-input-text col-12 p-0 mb-4 d-none">
                                <div class="label-text">{{"PRIMARY_UTTE" | translate}}</div>
                                <input type="text" placeholder="Placeholder text" class="input-text" value="Edit address in customerâ€™s account">
                            </div>
                            <div class="additional-sec">
                                <div class="title-sec">
                                    <div class="title">{{"ANALYTICS.UTTERANCES" | translate}}</div>
                                    <div class="action-title" (click)="launchPlatform()" *ngIf="inputData"><img src="assets/icons/survey/actionbot.svg">{{"ADV_TRAINING_PLATFORM" | translate}}</div>
                                </div>
                                <div class="info-desc">{{"IMPROVE_MATCHING_USER_INTENTS" | translate}}</div>
                                <div class="info-tip">
                                    <img src="assets/icons/info-blue.svg">
                                    <div class="info-text">{{"AUTO_DETECT_ENABLED" | translate}}</div>
                                </div>
                                <form [formGroup]="utterancesForm">
                                    <!-- <div class="kr-sg-input-text mt-3 mb-34" *ngIf="ucType === 'faq'">
                                        <div class="label-text">{{'USECASES.PRIMARY_QUESTION' | translate}}</div>
                                        <input type="text" class="input-text" formControlName="primaryUtterance" maxlength="130">
                                        <div class="error-msg" *ngIf="utterancesForm.get('primaryUtterance').errors && (utterancesForm.get('primaryUtterance').touched)">{{'USECASES.PU_REQUIRED' | translate}}</div>
                                    </div> -->
    
                                    <div class="utterances-block">
                                        <div class="header-utterances">
                                            <div class="d-flex align-items-center">
                                                <div class="left-sec">{{altUtterances.valid ? altUtterances.controls.length: altUtterances.controls.length - 1}} {{"ANALYTICS.UTTERANCES" | translate}}</div>
                                                <div class="kr-sg-input-search ml-5">
                                                    <input type="text" [placeholder]="'COMMON.SEARCH' | translate" class="input-search" #searchTerm (keyup)="0">
                                                    <img src="assets/icons/search_gray.svg" class="search-icon">
                                                    <img src="assets/icons/close.svg" class="close-icon" *ngIf="searchTerm.value" (click)="searchTerm.value = ''">
                                                </div>
                                            </div>
                                           
                                            <div class="add-btn" (click)="addAltUtterance('', true)" *ngIf="workflowService.appState !== 'published'" [class.disabled]="altUtterances.invalid"><img src="assets/images/plus.svg">{{'USECASES.ADD_ANOTHER' | translate}}</div>
                                        </div>
                                        <!-- <ng-container>
                                            <div class="kr-sg-input-text utt-input">
                                                <input type="text" placeholder="Add utterance" class="input-text">
                                            </div>
                                        </ng-container> -->
                                       
                                        <ng-container *ngFor="let altUtterance of utterancesForm.get('altUtterances')['controls']; let i = index">
                                            <div class="added-utt" *ngIf="(altUtterance.get('text').value || '').toLowerCase().includes(searchTerm.value)" formArrayName="altUtterances">
                                                <ng-container [formGroupName]="i">
                                                    <div class="kr-sg-input-text">
                                                        <input type="text" class="input-text" [ngStyle]="{'pointer-events': workflowService.appState == 'published'?'none': 'unset'}" [placeholder]="'USECASES.ALT_QUESTION_PLACEHOLDER' | translate" [class.err]="altUtterance.get('reason')" formControlName="text" maxlength="130" (keyup.enter)="altUtterances.valid? addAltUtterance('', true): ''">
                                                    </div>
                                                    <div class="info-icon" tooltipClass="error-usecase-tooltip" placement="bottom-center" [ngbTooltip]="altUtterance.get('reason').value" *ngIf="altUtterance.get('reason')">
                                                        <img src="assets/icons/use-case/Info-red.svg">
                                                    </div>
                                                    <div class="delete-utt" *ngIf="workflowService.appState !== 'published'" (click)="removeAltUtterance(i)">
                                                        <img src="assets/icons/agent-settings/delete.svg">
                                                    </div>
                                                </ng-container>
                                            </div>
                                        </ng-container>
                                        <div class="empty-search-image text-center" *ngIf="isNoSearchResultFound(searchTerm.value)">
                                            <img src="assets/icons/empty-utterance-search.svg">
                                        </div>
                                    </div>
                                </form>
                                
                            </div>
                        </div>
                    </div>
                    <div id="call" class="tab-pane fade" *ngIf="ucType === 'dialog'">
                        <div class="main-title">{{'USECASES.CALL_EXPERIENCE' | translate}}</div>
                        <div class="config-cards-sec">
                            <div class="cards-data" [class.selected]="callExp.type === 'automatedDialog'" (click)="onChangeCallExpType('automatedDialog')">
                                <div class="selected-title" *ngIf="callExp.type === 'automatedDialog'">{{'USECASES.SELECTED' | translate}}</div>
                                <div class="title-sec">
                                    <div class="img_block"><img src="assets/icons/conversations/automated-dialog-call.svg"></div>
                                    <div class="title">{{'USECASES.AUTOMATED_DIALOG' | translate}}</div>
                                </div>
                                <div class="desc-info">{{'USECASES.AD_DESC' | translate}}</div>
                            </div>
                            <div class="cards-data" [class.selected]="callExp.type === 'agentTransfer'" (click)="onChangeCallExpType('agentTransfer')">
                                <div class="selected-title" *ngIf="callExp.type === 'agentTransfer'">{{'USECASES.SELECTED' | translate}}</div>
                                <div class="title-sec">
                                    <div class="img_block"><img src="assets/icons/conversations/transfer-agent-call.svg"></div>
                                    <div class="title">{{'USECASES.TRANSFER_TO_AGENT' | translate}}</div>
                                </div>
                                <div class="desc-info">{{'USECASES.TA_DESC' | translate}}</div>
                            </div>
                            <div class="cards-data" [class.selected]="callExp.type === 'deflection'" (click)="onChangeCallExpType('deflection')">
                                <div class="selected-title" *ngIf="callExp.type === 'deflection'">{{'USECASES.SELECTED' | translate}}</div>
                                <div class="title-sec">
                                    <div class="img_block"><img src="assets/icons/conversations/delecttochat.svg"></div>
                                    <div class="title">{{'USECASES.DEFLECT_TO_CHAT' | translate}}</div>
                                </div>
                                <div class="desc-info">{{'USECASES.DC_DESC' | translate}}</div>
                            </div>
                        </div>
                        <div class="info-title" *ngIf="callExp.type === 'automatedDialog'">{{'USECASES.AD_INFO' | translate}}</div>
                        <div class="info-title" *ngIf="callExp.type === 'agentTransfer'">{{'USECASES.TA_INFO' | translate}}</div>
                        <div class="info-title" *ngIf="callExp.type === 'deflection'">{{'USECASES.DC_INFO' | translate}}</div>
                        <div class="ext-link" (click)="launchPlatform()" *ngIf="inputData && callExp.type === 'automatedDialog'"><img src="assets/icons/ext-link.svg">{{'USECASES.EDIT_IN_BOT_PLATFORM' | translate}}</div>

                        <ng-container  *ngIf="(authService.isAgentDesktopEnabled$ | async)">

                        
                            <div *ngIf="callExp.type === 'automatedDialog' && skillsLoaded">
                                <app-skills-dd [skillsList]="allSkillData" [addedSk]="callExp.skills" #callSkills></app-skills-dd>
                            </div>

                            <ng-container *ngIf="callExp.type === 'agentTransfer' && skillsLoaded"> 
                                <div class="info-title">{{'SKILLS_RECOMMEND_INFO' | translate}}</div>
                                <app-skills-dd [skillsList]="allSkillData" [addedSk]="callExp.skills" #callSkills></app-skills-dd>
                            </ng-container>
                        </ng-container>

                        <div *ngIf="callExp.type === 'agentTransfer'">
                            <div class="kr-sg-dropdowns mb-2 mt-4">
                                <div class="label-text labeltext mb-2">{{'USECASES.PRE_TRANSFER_MESSAGE' | translate}}</div>
                                <div class="dropdown dropdown-open">
                                    <button class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{(callExp.preTransferMsgType === 'custom' ? 'USECASES.CUSTOM_MESSAGE' : 'USECASES.DEFAULT_MESSAGE') | translate}}</button>                                            
                                    <ul class="dropdown-menu content-menu">                                                                          
                                    <li (click)="callExp.preTransferMsgType = 'default'"><a>{{'USECASES.DEFAULT_MESSAGE' | translate}}</a></li>
                                    <li (click)="onClickCustomMsg('callExp', 'preTransferMsgType')"><a>{{'USECASES.CUSTOM_MESSAGE' | translate}}</a></li>
                                    </ul>
                                </div>                       
                            </div>
                            <div class="response-view" *ngIf="callExp.preTransferMsgViewType === 'preview' || callExp.preTransferMsgType === 'default'">
                                <div class="res-tille">{{(callExp.preTransferMsgType === 'default'? 'USECASES.DEFAULT' : 'USECASES.MESSAGE') | translate}}</div>                       
                                <div class="dropdown kr-sg-overflow-menu" *ngIf="isEditable">
                                    <div class="dropdown-toggle" [class.d-none]="callExp.preTransferMsgType === 'default'" id="menu1" data-toggle="dropdown"><img class="action_icon" src="assets/icons/overflow-black.svg"></div>
                                    <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                                        <li (click)="callExp.preTransferMsgViewType = 'edit'"><a><img src="assets/icons/edit-black.svg">{{'USECASES.EDIT' | translate}}</a></li>
                                        <li class="d-none"><a><img src="assets/icons/delete-black.svg">{{'BUTTONS.DELETE' | translate}}</a></li>
                                    </ul>
                                </div>
                                <div class="response-info">{{callExp.preTransferMsgType === 'default' ? defaultMessages.callPreTransferMsg : callExp.preTransferMsgs[0]}}</div>
                                <div class="more-link d-none">{{'USECASES.MORE' | translate}}</div>
                            </div>                           
                            <div class="edit-view" *ngIf="callExp.preTransferMsgViewType === 'edit' && callExp.preTransferMsgType === 'custom'">                                
                                <div class="kr-sg-input-text-area">  
                                    <div class="edit-response-title-sec">
                                        <div class="title d-none">{{'MSG_ONE' | translate}}</div>
                                        <div class="btn-sec">
                                            <button class="kr-sg-buttonicon-secondary-two btn_md ml-2" [disabled]="!(callExp.preTransferMsgs[0] || '').trim()" (click)="callExp.preTransferMsgViewType = 'preview'"><img src="assets/icons/check-blue.svg">{{'USECASES.DONE' | translate}}</button>
                                            <button class="kr-sg-buttonicon-danger btn_md ml-2 d-none"><img src="assets/icons/close-red.svg">{{'USECASES.CLOSE' | translate}}</button>
                                        </div>
                                    </div>                                                         
                                    <textarea [placeholder]="'USECASES.AT_PLACEHOLDER' | translate" class="input-text" [(ngModel)]="callExp.preTransferMsgs[0]" name="preTransferMsg"></textarea>                                
                                </div>
                            </div>
                            <div class="footer-btns d-none">
                                <div class="add-btn"><img src="assets/images/plus.svg">{{'USECASES.ADD_ANOTHER' | translate}}</div>
                            </div>
                        </div>
                        
                        <div *ngIf="callExp.type !== 'automatedDialog'">
                            <ng-container *ngIf="callExp.type === 'agentTransfer'">
                                <div class="toggle-switch d-flex align-items-center mt-4">
                                    <div class="text-label">{{'USECASES.OFFER_CHAT_DEFLECTION' | translate}}</div>
                                    <label class="kr-sg-toggle large">
                                        <input type="checkbox" (change)="onChangeOfferDeflection(callExp.type)" [checked]="callExp.offerDeflection">
                                        <div class="slider"></div>
                                    </label>
                                </div>
                                <div class="p-text">{{'USECASES.CD_DESC' | translate}}</div>
                            </ng-container>
                            
                            <ng-container *ngIf="callExp.type === 'deflection'">
                                <div class="label-text labeltext mb-3 mt-3">{{'USECASES.DEFLECTION_SETTINGS' | translate}}</div>
                                <div class="p-text">{{'USECASES.DS_DESC' | translate}}</div>
                            </ng-container>
                            
                            <div class="mt-3" *ngIf="callExp.offerDeflection || callExp.type === 'deflection'">
                                <div class="kr-sg-radiobutton">
                                    <input id="tca" name="chatPreTransferMsgType" class="radio-custom" type="radio" [(ngModel)]="callExp.chatTransferType" value="deflection">
                                    <label for="tca" class="radio-custom-label">{{'USECASES.CHAT_AUTOMATION' | translate}}</label>
                                </div> 
                                <div class="kr-sg-radiobutton">
                                    <input id="tla" name="chatPreTransferMsgType" class="radio-custom" type="radio" [(ngModel)]="callExp.chatTransferType" value="agentTransfer">
                                    <label for="tla" class="radio-custom-label">{{'USECASES.LIVE_CHAT_AGENT' | translate}}</label>
                                </div>
                                <div class="kr-sg-dropdowns mb-2 mt-2">
                                    <div class="dropdown dropdown-open">
                                        <button class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{(callExp.chatPreTransferMsgType === 'custom' ? 'USECASES.CUSTOM_MESSAGE' : 'USECASES.DEFAULT_MESSAGE') | translate}}</button>                                            
                                        <ul class="dropdown-menu content-menu">                                                                          
                                        <li (click)="callExp.chatPreTransferMsgType = 'default'"><a>{{'USECASES.DEFAULT_MESSAGE' | translate}}</a></li>
                                        <li (click)="onClickCustomMsg('callExp', 'chatPreTransferMsgType')"><a>{{'USECASES.CUSTOM_MESSAGE' | translate}}</a></li>
                                        </ul>
                                    </div>                       
                                </div>
                                <div class="response-view" *ngIf="callExp.chatPreTransferMsgViewType === 'preview' || callExp.chatPreTransferMsgType === 'default'">
                                    <div class="res-tille">{{(callExp.chatPreTransferMsgType === 'default'? 'USECASES.DEFAULT' : 'USECASES.MESSAGE') | translate}}</div>                       
                                    <div class="dropdown kr-sg-overflow-menu" *ngIf="isEditable">
                                        <div class="dropdown-toggle" [class.d-none]="callExp.chatPreTransferMsgType === 'default'" id="menu1" data-toggle="dropdown"><img class="action_icon" src="assets/icons/overflow-black.svg"></div>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                                            <li (click)="callExp.chatPreTransferMsgViewType = 'edit'"><a><img src="assets/icons/edit-black.svg">{{'USECASES.EDIT' | translate}}</a></li>
                                            <li class="d-none"><a><img src="assets/icons/delete-black.svg">{{'USECASES.DELETE' | translate}}</a></li>
                                        </ul>
                                    </div>
                                    <div class="response-info">{{callExp.chatPreTransferMsgType === 'default' ? callExp.chatTransferType === 'deflection' ? defaultMessages.chatAutomationOptMsg : defaultMessages.chatAgentOptMsg : callExp.chatPreTransferMsgs[0]}}</div>
                                    <div class="more-link d-none">{{'USECASES.MORE' | translate}}</div>
                                </div>                           
                                <div class="edit-view" *ngIf="callExp.chatPreTransferMsgViewType === 'edit' && callExp.chatPreTransferMsgType === 'custom'">                                
                                    <div class="kr-sg-input-text-area">  
                                        <div class="edit-response-title-sec">
                                            <div class="title d-none">{{'MSG_ONE' | translate}}</div>
                                            <div class="btn-sec">
                                                <button class="kr-sg-buttonicon-secondary-two btn_md ml-2" [disabled]="!(callExp.chatPreTransferMsgs[0] || '').trim()" (click)="callExp.chatPreTransferMsgViewType = 'preview'"><img src="assets/icons/check-blue.svg">{{'USECASES.DONE' | translate}}</button>
                                                <button class="kr-sg-buttonicon-danger btn_md ml-2 d-none"><img src="assets/icons/close-red.svg">{{'USECASES.CLOSE' | translate}}</button>
                                            </div>
                                        </div>                                                         
                                        <textarea [placeholder]="'USECASES.AD_TRANSFER_PLACEHOLDER' | translate" class="input-text" [(ngModel)]="callExp.chatPreTransferMsgs[0]" name="chatPreTransferMsg"></textarea>                                
                                    </div>
                                </div>  
                            </div>
                        </div>
                    </div>
                    <div id="chat" class="tab-pane fade" *ngIf="ucType === 'dialog'">
                        <div class="main-title">{{'USECASES.CHAT_EXPERIENCE' | translate}}</div>
                        <div class="config-cards-sec chat-section">
                            <div class="cards-data" [class.selected]="chatExp.type === 'automatedDialog'" (click)="chatExp.type = 'automatedDialog';chatExp.isConfigured = true;">
                                <div class="selected-title" *ngIf="chatExp.type === 'automatedDialog'">{{'USECASES.SELECTED' | translate}}</div>
                                <div class="title-sec">
                                    <div class="img_block"><img src="assets/icons/conversations/automated-dialog-chat.svg"></div>
                                    <div class="title">{{'USECASES.AUTOMATED_DIALOG' | translate}}</div>
                                </div>
                                <div class="desc-info">{{'USECASES.AD_DESC' | translate}}</div>
                            </div>
                            <div class="cards-data" [class.selected]="chatExp.type === 'agentTransfer'" (click)="chatExp.type = 'agentTransfer';chatExp.isConfigured = true">
                                <div class="selected-title" *ngIf="chatExp.type === 'agentTransfer'">{{'USECASES.SELECTED' | translate}}</div>
                                <div class="title-sec">
                                    <div class="img_block"><img src="assets/icons/conversations/transfer-agent-chat.svg"></div>
                                    <div class="title">{{'USECASES.TRANSFER_TO_AGENT' | translate}}</div>
                                </div>
                                <div class="desc-info">{{'USECASES.TAC_DESC' | translate}}</div>
                            </div>                         
                        </div>
                        <div class="info-title" *ngIf="chatExp.type === 'automatedDialog'">{{'USECASES.AD_INFO' | translate}}</div>
                        <div class="info-title" *ngIf="chatExp.type === 'agentTransfer'">{{'USECASES.TA_INFO' | translate}}</div>

                        <div class="ext-link" (click)="launchPlatform()" *ngIf="inputData && chatExp.type === 'automatedDialog'"><img src="assets/icons/ext-link.svg">{{'USECASES.EDIT_IN_BOT_PLATFORM' | translate}}</div>


                        <ng-container *ngIf="chatExp.type === 'agentTransfer' && skillsLoaded">
                            <div class="info-title">{{'SKILLS_RECOMMEND_INFO' | translate}}</div>
                            <app-skills-dd [skillsList]="allSkillData" [addedSk]="chatExp.skills" #chatSkills></app-skills-dd>
                        </ng-container>

                        <ng-container *ngIf="chatExp.type === 'automatedDialog' && skillsLoaded"> 
                            <app-skills-dd [skillsList]="allSkillData" [addedSk]="chatExp.skills" #chatSkills></app-skills-dd>
                        </ng-container>

                        <div *ngIf="chatExp.type === 'automatedDialog'" class="d-none">
                            <div class="include-agent d-flex align-items-center mt-4">
                                <div class="mr-3">{{"USECASES.INCLUDE_AGENT_ASSIST" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.hasAgentAssistAccess" name="includeAgentAssist" checked>
                                    <div class="slider"></div>
                                </label>
                            </div>
                            <div class="info-text-enable">{{"USECASES.INCLUDE_AGENT_ASSIST_DESC" | translate}} </div>
                        </div>

                        <div *ngIf="chatExp.type === 'agentTransfer'">
                            <div class="kr-sg-dropdowns mb-2 mt-4">
                                <div class="label-text labeltext mb-2">{{'USECASES.PRE_TRANSFER_MESSAGE' | translate}}</div>
                                <div class="dropdown dropdown-open">
                                    <button class="dropdown-toggle dropdown-input" data-toggle="dropdown">{{(chatExp.preTransferMsgType === 'custom' ? 'USECASES.CUSTOM_MESSAGE' : 'USECASES.DEFAULT_MESSAGE') | translate}}</button>                                            
                                    <ul class="dropdown-menu content-menu">                                                                          
                                    <li (click)="chatExp.preTransferMsgType = 'default'"><a>{{'USECASES.DEFAULT_MESSAGE' | translate}}</a></li>
                                    <li (click)="onClickCustomMsg('chatExp', 'preTransferMsgType')"><a>{{'USECASES.CUSTOM_MESSAGE' | translate}}</a></li>
                                    </ul>
                                </div>                       
                            </div>
                            <div class="response-view" *ngIf="chatExp.preTransferMsgViewType === 'preview' || chatExp.preTransferMsgType === 'default'">
                                <div class="res-tille">{{(chatExp.preTransferMsgType === 'default'? 'USECASES.DEFAULT' : 'USECASES.MESSAGE') | translate}}</div>                       
                                <div class="dropdown kr-sg-overflow-menu" *ngIf="isEditable">
                                    <div class="dropdown-toggle" [class.d-none]="chatExp.preTransferMsgType === 'default'" id="menu1" data-toggle="dropdown"><img class="action_icon" src="assets/icons/overflow-black.svg"></div>
                                    <ul class="dropdown-menu" role="menu" aria-labelledby="menu1">
                                        <li (click)="chatExp.preTransferMsgViewType = 'edit'"><a><img src="assets/icons/edit-black.svg">{{'USECASES.EDIT' | translate}}</a></li>
                                        <li class="d-none"><a><img src="assets/icons/delete-black.svg">{{'USECASES.DELETE' | translate}}</a></li>
                                    </ul>
                                </div>
                                <div class="response-info">{{chatExp.preTransferMsgType === 'default' ? defaultMessages.chatPreTransferMsg : chatExp.preTransferMsgs[0]}}</div>
                                <div class="more-link d-none">{{("USAGE_BILLING.MORE" | lowercase) | translate}}</div>
                            </div>                           
                            <div class="edit-view" *ngIf="chatExp.preTransferMsgViewType === 'edit' && chatExp.preTransferMsgType === 'custom'">                                
                                <div class="kr-sg-input-text-area">  
                                    <div class="edit-response-title-sec">
                                        <div class="title d-none">{{"MSG_ONE" | translate}}</div>
                                        <div class="btn-sec">
                                            <button class="kr-sg-buttonicon-secondary-two btn_md ml-2" [disabled]="!(chatExp.preTransferMsgs[0] || '').trim()" (click)="chatExp.preTransferMsgViewType = 'preview'"><img src="assets/icons/check-blue.svg">{{'USECASES.DONE' | translate}}</button>
                                            <button class="kr-sg-buttonicon-danger btn_md ml-2 d-none"><img src="assets/icons/close-red.svg">{{'USECASES.CLOSE' | translate}}</button>
                                        </div>
                                    </div>                                                         
                                    <textarea [placeholder]="'USECASES.CA_TRANSFER_PLACEHOLDER' | translate" class="input-text" [(ngModel)]="chatExp.preTransferMsgs[0]" name="preTransferMsg"></textarea>                                
                                </div>
                            </div>
                        </div>                 
                     </div>      
                     <div id="call" class="tab-pane fade" *ngIf="ucType === 'faq'">
                        <div class="main-title">{{ "USECASES.CALL_EXPERIENCE" | translate }}</div>
                        <ng-container *ngFor="let responseObj of callExp.responses; let i = index">
                            <div class="response-view" *ngIf="responseObj.viewType !== 'edit'" (click)="isEditable ? responseObj.viewType = 'edit': ''">
                                <div class="res-tille">{{ "USECASES.RESPONSE" | translate }} {{i + 1}}</div>
                                <div class="copy-rom-call d-none" (click)="copyFormChat(responseObj, i, $event)" *ngIf="showCopyBtn(responseObj, i , 'phone')">
                                    <img src="assets/icons/copy.svg">{{'USECASES.COPY_FROM_CHAT' | translate}}
                                </div>
                                <div class="delete-respose-view" (click)="removeAnotherResponse(i, 'phone')" *ngIf="isEditable && callExp.responses.length !== 1">
                                    <img src="assets/icons/settings/delete.svg">
                                </div>                                

                                <div class="response-info">
                                    {{(responseObj.truncate)? (responseObj.answer | slice:0:300) :  (responseObj.answer)}} 
                                    <span *ngIf="responseObj.truncate && responseObj.answer.length >= 300">...</span>
                                    <span class="more-link" (click)="handleMoreText(responseObj)" *ngIf="responseObj.answer.length >= 300">{{responseObj.truncate?  ("USECASES.MORE" | translate) : ("USECASES.LESS" | translate) }}</span>
                                </div>
                            </div>
                            <div class="edit-view" *ngIf="responseObj.viewType === 'edit'">
                                <div class="kr-sg-input-text-area">
                                    <div class="edit-response-title-sec">
                                        <div class="title">{{ "USECASES.RESPONSE" | translate }} {{ i + 1}}</div>
                                        <div class="btn-sec">
                                            <button class="kr-sg-buttonicon-secondary-two btn_md ml-2" [disabled]="!responseObj.answer || !responseObj.answer.trim()" (click)="onClickDone(responseObj, i, 'phone')"><img src="assets/icons/check-blue.svg">{{ "USECASES.DONE" | translate }}</button>
                                            <button class="kr-sg-buttonicon-danger btn_md ml-2" (click)="closeAnotherResponse(responseObj, i, 'phone')" *ngIf="callExp.responses.length !== 1"><img src="assets/icons/close-red.svg">{{ "USECASES.CLOSE" | translate }}</button>
                                        </div>
                                    </div>
                                    <textarea [placeholder]="'USECASES.CALL_RESPONSE_PLACEHOLDER' | translate" class="input-text" [value]="responseObj.answer" (keydown.enter)="onClickDone(responseObj, i, 'phone')" (input)="responseObj.answer = $event.target.value;"></textarea>
                                </div>
                            </div>
                        </ng-container>
                        <div class="footer-btns">
                            <div class="add-btn" (click)="addAnotherResponse('phone')" [class.d-none]="hideAddBtn('phone')" *ngIf="isEditable"><img src="assets/images/plus.svg">{{ "USECASES.ADD_ANOTHER" | translate }}</div>
                        </div>
                    </div>
                    <div id="chat" class="tab-pane fade" *ngIf="ucType === 'faq'">
                        <div class="main-title">{{ "USECASES.CHAT_EXPERIENCE" | translate }}</div>
                        <ng-container *ngFor="let responseObj of chatExp.responses; let i = index">
                            <div class="response-view" *ngIf="responseObj.viewType !== 'edit'" (click)="isEditable ? responseObj.viewType = 'edit': ''">
                                <div class="res-tille">{{ "USECASES.RESPONSE" | translate }} {{i + 1}}</div>
                                <div class="copy-rom-call d-none" (click)="copyFormCall(responseObj, i, $event)" *ngIf="showCopyBtn(responseObj, i , 'chat')">
                                    <img src="assets/icons/copy.svg">{{'USECASES.COPY_FROM_CALL' | translate}}
                                </div>

                                <div class="delete-respose-view" (click)="removeAnotherResponse(i)" *ngIf="isEditable && chatExp.responses.length !== 1">
                                    <img src="assets/icons/settings/delete.svg">
                                </div>  

                                <div class="response-info">
                                    {{(responseObj.truncate)? (responseObj.answer | slice:0:300) :  (responseObj.answer)}} 
                                    <span *ngIf="responseObj.truncate && responseObj.answer.length >= 300">...</span>
                                    <span class="more-link" (click)="handleMoreText(responseObj)" *ngIf="responseObj.answer.length >= 300">{{responseObj.truncate?  ("USECASES.MORE" | translate)  : ("USECASES.LESS" | translate) }}</span>
                                </div>
                            </div>
                            <div class="edit-view-editor-custom" *ngIf="responseObj.viewType === 'edit'">
                                <div class="edit-response-title-sec">
                                    <div class="title">{{ "USECASES.RESPONSE" | translate }} {{i + 1}}</div>
                                    <div class="btn-sec">
                                        <button class="kr-sg-buttonicon-secondary-two btn_md ml-2" [disabled]="!responseObj.answer || !responseObj.answer.trim()" (click)="onClickDone(responseObj, i)"><img src="assets/icons/check-blue.svg">{{ "USECASES.DONE" | translate }}</button>
                                        <button class="kr-sg-buttonicon-danger btn_md ml-2" (click)="closeAnotherResponse(responseObj, i)" *ngIf="chatExp.responses.length !== 1"><img src="assets/icons/close-red.svg">{{ "USECASES.CLOSE" | translate }}</button>
                                    </div>
                                </div>
                                <md-editor [(ngModel)]="responseObj.answer" [options]="options" [type]="responseMode" (onEnter)="chatOnEnterKey(responseObj, i)" required height="300px" name="activeResponse"></md-editor>
                            </div>
                        </ng-container>
                        <div class="footer-btns mt-5">
                            <div class="add-btn" (click)="addAnotherResponse()" [class.d-none]="hideAddBtn()" *ngIf="isEditable"><img src="assets/images/plus.svg">{{ "USECASES.ADD_ANOTHER" | translate }}</div>
                        </div>
                    </div>
                    <div id="triggersandpermissions" class="tab-pane fade" *ngIf="ucType === 'dialog'">
                        <div class="trigger-and-permissions-sec">
                            <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"DURING_CHATS" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isChatEnabled" name="isChatEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isChatEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isChatEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"ENABLED_MANUALLY_AUTOMATICALLY_CHAT_CHANNEL" | translate}}</div>

                            <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"DURING_CALLS" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isVoiceEnabled" name="isVoiceEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isVoiceEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isVoiceEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"ENABLED_MANUALLY_AUTOMATICALLY_PHONE_CALL" | translate}}</div>

                            <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"DURINGEMAILS" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isEmailEnabled" name="isEmailEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isEmailEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isEmailEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"DURINGEMAILS_DESC" | translate}}</div>

                            <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"AGENTASSIST.SKILL_MATCH" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isSkillMatchEnabled" name="isSkillMatchEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isSkillMatchEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isSkillMatchEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"ENABLED_AGENTS_MATCH_SKILLS" | translate}}</div>
                            <ng-container *ngIf="conv.triggerPoints.isSkillMatchEnabled">
                                <div class="mb-3">
                                    <!-- <app-routing-rules [rr]="routingList" 
                                    [asl]='allSkillsList' 
                                    [asgl]='allSkillGpsList' 
                                    [ssg]='shortenSkGp'
                                    [as]='allSkills'>
                                    </app-routing-rules> -->
                                    <app-skills-routing [routingList]="conv.triggerPoints.skillMatchRules" #routingComp></app-skills-routing>
                                </div>
                            </ng-container>
                            <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"AGENTASSIST.AGENT_GROUP_MATCH" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isAgentGroupMatchEnabled" name="isAgentGroupMatchEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isAgentGroupMatchEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isAgentGroupMatchEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"ENABLED_USECASE_TRIGGER_AGENTS_SPECIFIED_GROUP" | translate}}</div>
                            <ng-container *ngIf="conv.triggerPoints.isAgentGroupMatchEnabled">
                                <div class="mb-3">
                                    <div class="label-text">{{"AGENTS_DEFAULTS.AGENT_GROUPS" | translate}}</div>
                                    <app-agent-gp-match *ngIf="agentGroups?.length" [sag]="selectedAgentGroups" [ag]="agentGroups"></app-agent-gp-match>
                                </div>
                            </ng-container>
                            <!-- <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"AUTO_DETECT_INTENT" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isAutoDetectIntentEnabled" name="isAutoDetectIntentEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isAutoDetectIntentEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isAutoDetectIntentEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"ENABLED_CONVS_AGENT_CUST_CONTINIOUSLY_MONITORED" | translate}}</div> -->
                            <ng-container>

                            </ng-container>
                            <div class="d-flex align-items-center">
                                <div class="title-with-toggle mr-3">{{"LAUNCH_MENU" | translate}}</div>
                                <label class="kr-sg-toggle">
                                    <input type="checkbox" [(ngModel)]="conv.triggerPoints.isLaunchByMenuEnabled" name="isLaunchByMenuEnabled">
                                    <div class="slider"><span class="enabled" *ngIf="conv.triggerPoints.isLaunchByMenuEnabled">{{"DEFAULTS.ENABLED" | translate}}</span><span class="disabled" *ngIf="!conv.triggerPoints.isLaunchByMenuEnabled">{{"DEFAULTS.DISABLED" | translate}}</span></div>
                                </label>
                            </div>
                            <div class="desc-text-info">{{"ENABLED_LISTED_MENU_USECASES_AGENTASSIST_WINDOW_BROWSER" | translate}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </perfect-scrollbar>
        <div class="footer-sec d-flex align-items-center" *ngIf="workflowService.appState !== 'published'">
            <button type="button" class="kr-sg-button-primary btn_lg" [disabled]="saveInProgress" (click)="onSave()"> {{(saveInProgress ? 'BUTTONS.SAVING': 'BUTTONS.SAVE') | translate}}</button>        
            <div class="info-success-message" *ngIf="stats.total">
                <span class="info-green"><img src="assets/icons/use-case/double-check.svg"> {{"OUT_OF" | translate}} {{stats.total}} {{"ANALYTICS.UTTERANCES" | translate}} {{stats.success}} {{"SAVED_AND" | translate}} </span><span class="info-red">{{stats.failed}} {{"FAILED" | translate}}</span> 
            </div>
        </div>
    </form>
</div>