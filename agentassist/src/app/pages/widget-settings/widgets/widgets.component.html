<div *ngIf="isLoading" class="widgets-settinggs-wrapper" [ngClass]="{'agent-assist-settings-wrapper-isunified' : isUnifiedPlatform}">
    <div class="header-data">
        <div class="title">
            <p>AgentAssist Settings</p>
            <i class="icon-sa-info"></i>
        </div>
        <div class="desc-text">Define widgets accessibility to Agents</div>
    </div>
    <div class="body-widget-data">
        <div class="toggle-info-data m-0">
            <label class="kr-sg-toggle toggle-enabled-disabled">
                <input type="checkbox" [(ngModel)]="agentAssistSettings.agentAssistWidgetEnabled">
                <div class="slider">
                    <span class="enabled"></span>
                    <span class="disabled"></span>
                </div>
            </label>
            <div class="content-data-toggle">
                <h1>AgentAssist Widget</h1>
                <p>If enabled, agents will be able to access the AgentAssist widget when having conversation with
                    customer</p>
            </div>
        </div>
        <div class="widgets-info-toglles"
        [ngClass]="(!agentAssistSettings?.agentAssistWidgetEnabled) ? 'disableDropdown disabled' : ''">
            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isProactiveEnabled">
                    <div class="slider">

                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>Proactive Mode</h1>
                    <p>When disabled, the transcript and automatic/proactive intent suggestion features will not be
                        available. However, agents can still use greetings, 'Ask AgentAssist' feature and MyBot to
                        directly run automations.</p>
                </div>
            </div>
            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isAgentCoachingEnabled">
                    <div class="slider">
                        <span class="enabled"></span>
                        <span class="disabled"></span>
                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>Agent Coaching</h1>
                    <p>When disabled, the real-time coaching features will not be available.</p>
                </div>
            </div>
            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isAgentResponseEnabled">
                    <div class="slider">
                        <span class="enabled"></span>
                        <span class="disabled"></span>
                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>Send Button for Agent Assist Responses</h1>
                    <p>When disabled, the send button for AgentAssist Responses will not be available.</p>
                </div>
            </div>
            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isAgentPlaybookEnabled">
                    <div class="slider">
                        <span class="enabled"></span>
                        <span class="disabled"></span>
                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>Agent Playbook</h1>
                    <p>When disabled, the step by step playbook guide and welcome messages will not be available. </p>
                </div>
            </div>
            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isSearchAssistEnabled">
                    <div class="slider">
                        <span class="enabled"></span>
                        <span class="disabled"></span>
                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>SearchAssist</h1>
                    <p>When disabled, intelligent, contextual, and personalised search experience across your web and
                        mobile channels will not be available.</p>
                </div>
            </div>
            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isWidgetLandingEnabled.isEnabled">
                    <div class="slider">
                        <span class="enabled"></span>
                        <span class="disabled"></span>
                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>Widget Landing Tab for Voice Channel</h1>
                    <p>When disabled, agents will land on playbook/assist tab page by default when widget is launched.
                    </p>
                </div>
            </div>

            <div class="landing-tab-info" *ngIf="agentAssistSettings?.isWidgetLandingEnabled?.isEnabled">
                <div class="info-dropdowns">
                    <div class="kr-sg-checkbox">
                        <input id="checkbox-1" class="checkbox-custom" type="checkbox" (click)="selectedOption('chat'); $event.stopPropagation();" [checked]="agentAssistSettings?.isWidgetLandingEnabled?.chat?.isEnabled">
                        <label for="checkbox-1" class="checkbox-custom-label">Chat Channel</label>
                    </div> 
                    <div class="dropdown-select-tab">
                        <div class="label-text">Choose your preferred page you want to set as Landing page</div>
                        <div class="kr-sg-dropdowns" ngbDropdown>                    
                            <div class="dropdown dropdown-open">
                              <button class="dropdown-toggle dropdown-input" [disabled]="!agentAssistSettings?.isWidgetLandingEnabled?.chat?.isEnabled" 
                              ngbDropdownToggle 
                              [ngClass]="!agentAssistSettings?.isWidgetLandingEnabled?.chat?.isEnabled ? 'disableDropdown' : ''">{{agentAssistSettings?.isWidgetLandingEnabled?.chat?.tab}}</button>
                              <ul class="dropdown-menu content-menu p-0" ngbDropdownMenu>
                                <ng-container *ngFor="let tab of landingPageTabs.chat;">
                                    <li ngbDropdownItem class="p-0" (click)="selectTab('chat' ,tab)">
                                        <a>{{tab}}</a>
                                    </li>
                                </ng-container>
                              </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-dropdowns">
                    <div class="kr-sg-checkbox">
                        <input id="checkbox-12" class="checkbox-custom" type="checkbox" (click)="selectedOption('voice'); $event.stopPropagation();" [checked]="agentAssistSettings?.isWidgetLandingEnabled?.voice?.isEnabled">
                        <label for="checkbox-12" class="checkbox-custom-label">Voice Channel</label>
                    </div> 
                    <div class="dropdown-select-tab">
                        <div class="label-text">Choose your preferred page you want to set as Landing page</div>
                        <div class="kr-sg-dropdowns" ngbDropdown>
                            <div class="dropdown dropdown-open">
                              <button class="dropdown-toggle dropdown-input" [disabled]="!agentAssistSettings?.isWidgetLandingEnabled?.voice?.isEnabled" 
                              ngbDropdownToggle 
                              [ngClass]="!agentAssistSettings?.isWidgetLandingEnabled?.voice?.isEnabled ? 'disableDropdown' : ''">{{agentAssistSettings?.isWidgetLandingEnabled?.voice?.tab}}</button>
                              <ul class="dropdown-menu content-menu p-0" ngbDropdownMenu>
                                <ng-container *ngFor="let tab of landingPageTabs.voice;">
                                    <li ngbDropdownItem class="p-0" (click)="selectTab('voice', tab)">
                                        <a>{{tab}}</a>
                                    </li>
                                </ng-container>
                              </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="toggle-info-data">
                <label class="kr-sg-toggle toggle-enabled-disabled">
                    <input type="checkbox" [(ngModel)]="agentAssistSettings.isCustomisedLogoEnabled.isEnabled">
                    <div class="slider">
                        <span class="enabled"></span>
                        <span class="disabled"></span>
                    </div>
                </label>
                <div class="content-data-toggle">
                    <h1>Customize Logo</h1>
                    <p>When disabled, AgentAssist and Kore.ai Logo will be visible by default</p>
                </div>
            </div>
            <div class="customize-logo-data" *ngIf="agentAssistSettings?.isCustomisedLogoEnabled?.isEnabled">
                <div class="logo-h">Logo File</div>
                <div class="image-upload-block">
                    <div class="upload-logo-block">
                        <input type="file" (dropped)="handleFileDrop($event)" (change)="addFiles(fileInput.files)"
                            #fileInput>
                        <div class="icon_file_block">
                            <svg width="21" height="20" viewBox="0 0 21 20" fill="none">
                                <path
                                    d="M7.16663 13.3333L10.5 10M10.5 10L13.8333 13.3333M10.5 10V17.5M17.1666 13.9524C18.1845 13.1117 18.8333 11.8399 18.8333 10.4167C18.8333 7.88536 16.7813 5.83333 14.25 5.83333C14.0679 5.83333 13.8975 5.73833 13.8051 5.58145C12.7183 3.73736 10.712 2.5 8.41663 2.5C4.96485 2.5 2.16663 5.29822 2.16663 8.75C2.16663 10.4718 2.86283 12.0309 3.98908 13.1613"
                                    stroke="#475467" stroke-width="1.66667" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </div>
                        <p>Click to upload or drag and drop</p>
                        <span>SVG, PNG (max. 800x400px)</span>
                    </div>
                    <div class="uploaded-img" *ngIf="(agentAssistSettings?.isCustomisedLogoEnabled && agentAssistSettings?.isCustomisedLogoEnabled?.fileName && agentAssistSettings?.isCustomisedLogoEnabled?.fileName !== '')">
                        <img [src]="imgPreview">
                    </div>
                </div>
                <div class="uploading-inprogress-data" [ngClass]="{'failed-inprogress' : (fileTypeFlag || largeFileFlag)}"
                *ngIf="uploadedImgDetails !== ''">
                    <div class="checked-upload" *ngIf="progress === 100">
                        <i class="icon-ast_checkright"></i>
                    </div>
                    <div class="delete-upload" (click)="removeFile()">
                        <i class="icon-sa-delete"></i>
                    </div>
                    <div class="icon_block">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M9.33268 1.51301V4.26671C9.33268 4.64008 9.33268 4.82676 9.40534 4.96937C9.46926 5.09481 9.57125 5.1968 9.69669 5.26071C9.8393 5.33337 10.026 5.33337 10.3993 5.33337H13.153M13.3327 6.65886V11.4667C13.3327 12.5868 13.3327 13.1469 13.1147 13.5747C12.9229 13.951 12.617 14.257 12.2407 14.4487C11.8128 14.6667 11.2528 14.6667 10.1327 14.6667H5.86602C4.74591 14.6667 4.18586 14.6667 3.75803 14.4487C3.38171 14.257 3.07575 13.951 2.884 13.5747C2.66602 13.1469 2.66602 12.5868 2.66602 11.4667V4.53337C2.66602 3.41327 2.66602 2.85322 2.884 2.42539C3.07575 2.04907 3.38171 1.74311 3.75803 1.55136C4.18586 1.33337 4.74591 1.33337 5.86602 1.33337H8.0072C8.49638 1.33337 8.74097 1.33337 8.97115 1.38863C9.17522 1.43763 9.37031 1.51844 9.54925 1.62809C9.75108 1.75178 9.92404 1.92473 10.2699 2.27063L12.3954 4.39612C12.7413 4.74202 12.9143 4.91497 13.038 5.1168C13.1476 5.29575 13.2284 5.49084 13.2774 5.69491C13.3327 5.92509 13.3327 6.16968 13.3327 6.65886Z" stroke="#155EEF" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="content-block">
                        <h1>{{agentAssistSettings?.isCustomisedLogoEnabled?.fileName || uploadedImgDetails}}</h1>
                        <p>{{(logoSize) | number : '1.1-1'}} KB</p>
                        <h3 *ngIf="fileTypeFlag">Uploaded file format do not match with (SVG/PNG)</h3>
                        <h3 *ngIf="largeFileFlag">File size exceed the maximum allowed size(5MB)</h3>
                        <div class="progress-data">
                            <div class="progress-bg">
                                <div class="bg-progress" [style.width]="progress"></div>
                            </div>
                            <h2>{{progress}}%</h2>
                        </div>
                    </div>
                </div>
                <!-- <div class="progress" *ngIf="progress">
                    <div class="progress-bar" [style.width]="progress + '%'">{{progress}}%</div>
                </div>
                <div *ngIf="this.agentAssistSettings.isCustomisedLogoEnabled.fileName !== ''">
                    {{ fileList | json }}
                    <img [src]="this.agentAssistSettings.isCustomisedLogoEnabled.fileName !== '' ? 'this.agentAssistSettings.isCustomisedLogoEnabled.fileName' : ''" alt="" style="height: 100%; width: 40%;">
                </div> -->
            </div>
        </div>
    </div>
    <div class="save-cancel-btns">
        <button class="kr-sg-button-secondary-two btn_md" [disabled]="disableButtons" (click)="cancleAgentAssistSettings()">{{'BUTTONS.CANCEL' | translate}}</button>
        <button class="kr-sg-button-primary btn_md" [disabled]="disableButtons" (click)="saveAgentAssistSettings()">{{'BUTTONS.SAVE' | translate}}</button>
    </div>
</div>
