<div class="modal-wrapper-coaching">
    <div class="header-wrapper">
        <div class="title-heading">{{createOrEdit == coachingCnst.CREATE ? ('COACHING_CREATE_RULE_NEW' | translate) : ('COACHING_CREATE_RULE_SETTINGS' | translate)}}</div>
        <div class="close-modal" (click)="closeRule()">
            <i class="icon-sa-close"></i>
        </div>
    </div>
    <div class="body-wrapper">
        <div class="kr-sg-input-text m-b-15">
            <div class="label-text">{{"AGENTSETTINGS.NAME" | translate}}</div>
            <input [disabled]="default" type="text" maxlength="100" placeholder="{{'PLACEHOLDER.ADD_NAME' | translate}}" class="input-text" [(ngModel)]="ruleName">
        </div>
        <div class="kr-sg-input-text-area m-b-15">
            <div class="description-info m-b-8">
                <div class="label-text">{{"SETTINGS.DESCRIPTION" | translate}}</div>
                <span class="info-tip" placement="bottom-center" tooltipClass="tooltip-global-styles"
                    ngbTooltip="{{'COACHING_CREATE_RULE_DESC_TOOLTIP | translate'}}">
                    <i class="icon-sa-info"></i>
                </span>
                <span class="tag">{{"COACHING_CREATE_RULE_LLM" | translate}}</span>
            </div>
            <textarea placeholder="{{'COACHING_CREATE_RULE_PLACEHOLDER_RULE_PURPOSE' | translate}}" maxlength="1000" class="input-text" [(ngModel)]="ruleDesc"></textarea>
        </div>
        <div class="label-text m-b-5">{{'COACHING_CREATE_RULE_TAGS' | translate}}
            <span class="info-tip" placement="bottom-center" tooltipClass="tooltip-global-styles"
                ngbTooltip="{{'COACHING_CREATE_RULE_ENRER_ADD' | translate}}">
                <i class="icon-sa-info"></i>
            </span>
        </div>
                               
        <mat-form-field class="example-chip-list m-b-15">
            <mat-label>{{'COACHING_CREATE_RULE_ADD_TAG' | translate}}</mat-label>
            <mat-chip-list #chipList>
                <mat-chip *ngFor="let tag of tags" [selectable]="true" [removable]="true" (removed)="remove(tag.name)">
                    <span class="chip-name text-truncate mx-w-100" title="{{tag.name}}">{{tag.name}}</span>
                    <span class="icon-sa-close" matChipRemove *ngIf="true"></span>
                </mat-chip>
                <input placeholder="{{'COACHING_CREATE_RULE_ADD_TAG' | translate}}" maxlength="25" #tagInput [matChipInputFor]="chipList"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="false"
                    (matChipInputTokenEnd)="add($event)" [matAutocomplete]="auto" [formControl]="tagControl"
                    #trigger="matAutocompleteTrigger">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete">
                <div class="mat-checkboxs">
                    <mat-option *ngFor="let tag of filteredTagsDisplay;let i = index" [title]="tag"
                        (click)="selectedOption(tag.name, i);$event.stopPropagation();trigger.openPanel()">
                        <input id="checkbox-{{i}}" type="checkbox"
                        
                            (click)="selectedOption(tag.name, i);trigger.openPanel();$event.stopPropagation();" [value]="tag.name"
                            [checked]="tag.checked">
                            <div class="label-check text-truncate" for="checkbox-{{i}}">
                                <span>{{tag.name}}</span>
                            </div>                            
                    </mat-option>
                </div>
            </mat-autocomplete>
        </mat-form-field>

        <div class="channels-tags">
            <div class="label-text">{{'NAV.CHANNELS' | translate}}</div>
            <div class="channels-check">
                <div class="check-item" *ngFor="let item of coachingCnst.channelList; let i = index">
                    <input class="input" id="checkboxtd-{{i}}" type="checkbox" (change)="channelSelection($event,item)"
                        [checked]="channelList.indexOf(item) >= 0">
                    <span for="checkboxtd-{{i}}">{{coachingCnst[item]}}</span>
                </div>

            </div>
        </div>
    </div>
    <div class="footer-wrapper">
        <button class="kr-sg-button-secondary-two btn_lg" (click)="closeRule()">{{'BUTTONS.CANCEL' | translate}}</button>
        <button class="kr-sg-button-primary btn_lg" (click)="submitForm()" [disabled]="disableApplyButton || !(ruleName?.trim() && ruleDesc?.trim() && channelList?.length)">{{'BUTTONS.APPLY' | translate}}</button>
    </div>
</div>
